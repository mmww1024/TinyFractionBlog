<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf8">
    <meta name="viewport"
        content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,minimal-ui,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title></title>
    <script>
        (function (doc, win) {
            var docEl = doc.documentElement,
                resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
                recalc = function () {
                    var clientWidth = docEl.clientWidth;
                    if (!clientWidth) return;
                    if (clientWidth > 432) {
                        docEl.style.fontSize = 100 + 'px';
                    } else {
                        docEl.style.fontSize = 100 * (clientWidth / 750) + 'px';
                    }
                };
            if (!doc.addEventListener) return;
            win.addEventListener(resizeEvt, recalc, false);
            doc.addEventListener('DOMContentLoaded', recalc, false);
        })(document, window);
    </script>
    <script async src="https://dw.xcar.com.cn/analytics_foot.php?" type="text/javascript"></script>
    <style>
        body,
        h1,
        h2,
        h3,
        h4,
        blockquote,
        p,
        dl,
        dt,
        dd,
        ul,
        ol,
        li,
        th,
        td,
        form,
        fieldset,
        legend,
        button,
        input,
        textarea {
            margin: 0;
            padding: 0;
            font-size: 100%;
        }

        body {
            -webkit-text-size-adjust: none;
            color: #44494D;
            font-family: "\534E\6587\7EC6\9ED1", Helvetica, Arial, sans-serif;
            font-size: .16rem;
            -webkit-tap-highlight-color: rgba(0, 0, 0, .2);
        }

        em,
        i,
        var {
            font-style: normal;
        }

        ol,
        ul {
            list-style: none;
            list-style-position: outside;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0;
        }

        img {
            width: 100%;
            border: none;
            vertical-align: top;
        }

        select,
        a {
            text-decoration: none;
            outline: none;
            -webkit-text-size-adjust: none;
        }

        select,
        input {
            border-radius: 0;
            -webkit-appearance: none;
            border: none;
        }

        textarea {
            resize: none;
            border-radius: 0;
            -webkit-appearance: none;
        }

        a {
            color: #44494D;
            line-height: inherit;
        }

        .row {
            width: 100%;
            margin: 0 auto;
            *zoom: 1;
        }

        .row:before,
        .row:after {
            content: " ";
            display: table;
        }

        .row:after {
            clear: both;
        }

        .clearfix:after {
            content: ".";
            display: block;
            height: 0;
            clear: both;
            visibility: hidden;
        }

        *,
        *:before,
        *:after {
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            word-wrap: break-word;
            word-break: break-all;
            outline: none;
        }

        body,
        html {
            position: relative;
            height: 100%;
            width: 100%;
            background: transparent;
        }


        .main {
            width: 5.76rem;
            text-align: center;
            position: absolute;
            top: 50%;
            left: 50%;
            margin-left: -2.88rem;
            margin-top: -4.22rem;
        }

        .banner {
            display: block;
            width: 5.76rem;
            height: 6.8rem;
            background: url('images/gotoFinish.jpg') no-repeat center center;
            background-size: 100%;
            margin-bottom: .15rem;
        }

        .main_box {
            width: 5.76rem;
            height: 0.84rem;
            line-height: .84rem;
            background: #28acf6;
            margin-bottom: .2rem;
        }

        .main_box a {
            display: block;
            width: 100%;
            height: 100%;
            color: #fff;
            font-size: .28rem;
        }

        .close_webview {
            width: .44rem;
            height: .44rem;
            text-align: center;
            margin: 0 auto;
            background: url('images/close.png') no-repeat center center;
            background-size: 100%;
        }

        @-webkit-keyframes zoomIn {
            from {
                opacity: 0;
                -webkit-transform: scale3d(0.3, 0.3, 0.3);
                transform: scale3d(0.3, 0.3, 0.3);
            }

            50% {
                opacity: 1;
            }
        }

        @keyframes zoomIn {
            from {
                opacity: 0;
                -webkit-transform: scale3d(0.3, 0.3, 0.3);
                transform: scale3d(0.3, 0.3, 0.3);
            }

            50% {
                opacity: 1;
            }
        }

        .zoomIn {
            -webkit-animation-name: zoomIn;
            animation-name: zoomIn;
        }

        .animated {
            -webkit-animation-duration: 0.5s;
            animation-duration: 0.5s;
            -webkit-animation-fill-mode: both;
            animation-fill-mode: both;
        }

        .animated.delay-1s {
            -webkit-animation-delay: 0.2s;
            animation-delay: 0.2s;
        }
    </style>
</head>

<body>
    <!--$--4440*专题title修改-4440--$-->
    <!--$--4440*专题title修改-4440--$-->
    <!--$--2001内容-2001内容--$-->
    <div class="main animated zoomIn delay-1s">
        <a href='javascript:;' class="banner"></a>
        <div class="main_box">
            <a href='javascript:;'>去完成</a>
        </div>
        <div class="close_webview"></div>
    </div>
    <!--$--2001内容-2001内容--$-->
    <!--$--2002内容-2002内容--$-->
   
    <script src="js/jxcar.js"></script>
    <script src="https://m-js.xcar.com.cn/touch/v4/dist/v1.0/js/lib/zepto.js"></script>
    <script type="text/javascript">
        /*
         * data.auth 未编码，但php验证并没有用escape编码
         * $.cookie 为escape编码所以单独给一个setcookie方法
         * */
        function setcookieescape(name, value, options) {
            if (typeof value != 'undefined') { // name and value given, set cookie
                options = options || {
                    'domain': document.domain
                };
                if (value === null) {
                    value = '';
                    options.expires = -1;
                }
                var expires = '';
                if (options.expires && (typeof options.expires == 'number' || options.expires.toUTCString)) {
                    var date;
                    if (typeof options.expires == 'number') {
                        date = new Date();
                        date.setTime(date.getTime() + (options.expires * 1000));
                    } else {
                        date = options.expires;
                    }
                    expires = '; expires=' + date
                .toUTCString(); // use expires attribute, max-age is not supported by IE
                }
                // CAUTION: Needed to parenthesiQZe options.path and options.domain
                // in the following expressions, otherwise they evaluate to undefined
                // in the packed version for some reason...
                var path = options.path ? '; path=' + (options.path) : '';
                var domain = options.domain ? '; domain=' + (options.domain) : '';
                var secure = options.secure ? '; secure' : '';
                document.cookie = [name, '=', value, expires, path, domain, secure].join('');
            } else { // only name given, get cookie
                var cookieValue = null;
                if (document.cookie && document.cookie != '') {
                    var cookies = document.cookie.split(';');
                    for (var i = 0; i < cookies.length; i++) {
                        var cookie = $.trim(cookies[i]);
                        // Does this cookie string begin with the name we want?
                        if (cookie.substring(0, name.length + 1) == (name + '=')) {
                            cookieValue = unescape(cookie.substring(name.length + 1));
                            break;
                        }
                    }
                }
                return cookieValue;
            }
        }
        // clicklog = function (str1, str2, str3) {
        //     if (typeof clicklog == 'function') {
        //         try {
        //             clicklog(str1, str2, str3);
        //         } catch (e) {}
        //     } else {

        //     }
        // };

        $('.main_box a,.banner').on('click', function () {
            console.log(123);

            clicklog(127407)
        })

        xcarjsapi.ready(function () {
            // exports.clicklog = function (str1, str2, str3) {
            //     if (typeof clicklog == 'function') {
            //         try {
            //             clicklog(str1, str2, str3);
            //         } catch (e) { }
            //     } else {

            //     }
            // };

            var user = {};
            $('.main').on('click', '.close_webview', function () {
                xcarjsapi.closeWebview();
            });

            /*修改用户cookie信息*/
            function changeuser(data) {
                if (!data || !data.uid || !data.auth) {
                    data = {
                        uid: 0,
                        uname: '',
                        auth: '',
                        cookie: ''
                    }
                    //return false;
                }
                var _cookieoption = {
                    expires: 365 * 24 * 60 * 60,
                    path: '/',
                    domain: '.xcar.com.cn'
                }
                user = {
                    uid: +data.uid,
                    uname: data.uname,
                    auth: data.auth,
                    cookie: data.cookie.replace('iphonecookie=', '') /*明显坑人 这都是毒*/
                }
                if (!user.uid) {
                    xcarjsapi.requestLogin({}, changeuser);
                    return false;
                } else {
                    var paramsdata = {
                        url: 'https://a.xcar.com.cn/apptast?uid=' + user.uid
                    };
                    $('.main_box a,.banner').attr('href', 'appxcar://m.xcar.com.cn.webLink?params=' +
                        encodeURIComponent(JSON.stringify(paramsdata)))
                    // location.href='appxcar://m.xcar.com.cn.webLink?params='+encodeURIComponent(JSON.stringify(paramsdata));
                    $('.main_box a,.banner').on('click', function () {
                        clicklog(127407)
                    })
                }
                setcookieescape('iphonecookie', encodeURIComponent(user.cookie), _cookieoption);
            }
            console.log(user)
            xcarjsapi.requestCookie(changeuser)


        })
    </script>
    <!--$--2002内容-2002内容--$-->
   
    
</body>

</html>